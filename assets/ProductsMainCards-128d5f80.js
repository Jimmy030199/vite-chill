import{u as J,a as F}from"./useproductsStore-875e24d4.js";import{u as U}from"./usestatusStore-0e436d0e.js";import{_ as M,s as S,r as $,p as q,m as z,g as C,a as n,c as r,F as I,b as O,d as e,w as f,t as m,q as R,e as G,h as P,k as x}from"./index-b53869ae.js";import{M as K}from"./ModalItem-a65fddb7.js";import"./modal-4b85e49e.js";const Q={setup(){const i=J(),l=F(),g=U(),{sortType:o,type:p}=S(i),{modalmes:v,toastmes:a,showCollection:t,removecollectionId:h}=S(g),{addCart:u,getCommidity:D}=l,{getAlldata:L}=i,j=s=>{p.value=s},B=$(null),E=$(null),H=s=>{v.value=s,u(s.id,1);const c=new Date().toLocaleTimeString();console.log(c),a.value={style:"bg-success text-white",title:s.title,content:`已將${s.title}一個商品加入購物車`,time:c}},N=$([]),y=()=>{N.value=o.value.map(s=>{const c=JSON.parse(localStorage.getItem("chillcollection"));let d=!1;return c&&c.forEach(_=>{_.id===s.id&&(d=!0)}),{...s,heart:d}})};q(()=>{y()});const A=(s,c,d)=>{const _=JSON.parse(localStorage.getItem("chillcollection"));if(t.value=!1,console.log("localarr",_),_){const V={id:s,title:c,img:d},b=JSON.stringify([..._,V]);console.log("newlocalarr",b),localStorage.setItem("chillcollection",b),y()}else{const b=JSON.stringify([{id:s,title:c,img:d}]);localStorage.setItem("chillcollection",b),y()}const w=new Date().toLocaleTimeString(),k=`${c}已加入收藏`;a.value={style:"bg-info text-white",title:c,content:k,time:w}},T=s=>{t.value=!1;const d=JSON.parse(localStorage.getItem("chillcollection")).filter(k=>k.id!==s),_=JSON.stringify(d);localStorage.setItem("chillcollection",_),y();const w=new Date().toLocaleTimeString();a.value={style:"bg-danger text-white",title:"取消收藏",content:"已取消收藏該商品",time:w}};return z(h,()=>{T(h.value)}),{getAlldata:L,sortType:o,sortTypeHeart:N,getCommidity:D,changeType:j,Modalref:B,plusone:H,Modalrefprops:E,addcollect:A,removecollect:T}},created(){this.getAlldata()},components:{ModalItemVue:K}},W={class:"card mt-2 h-100"},X={class:"wrap-img-sort"},Y=["onClick"],Z=e("i",{class:"bi bi-heart"},null,-1),ee=[Z],te=["onClick"],oe=e("i",{class:"bi bi-heart-fill"},null,-1),se=[oe],ae=["src","onClick"],ce={class:"product-sort fs-3 fw-bold text-center text-white"},le={class:"card-body text-center d-flex flex-column justify-content-between"},ne={class:""},re={class:"card-title fs-4 fw-bold"},ie={class:"card-text"},de={key:0,class:"fs-6 fw-bold text-decoration-line-through text-danger me-2"},_e=e("br",null,null,-1),ge={class:"fs-6 fw-bold"},he=["onClick"],ue=e("i",{class:"bi bi-basket2-fill"},null,-1);function me(i,l,g,o,p,v){const a=C("ModalItemVue");return n(),r(I,null,[(n(!0),r(I,null,O(o.sortTypeHeart,(t,h)=>(n(),r("div",{class:"col",key:"product"+h},[e("div",W,[e("div",X,[t.heart?(n(),r("div",{key:1,class:"love-store fs-4 text-danger",onClick:u=>o.removecollect(t.id)},se,8,te)):(n(),r("div",{key:0,class:"love-store fs-4",onClick:u=>o.addcollect(t.id,t.title,t.imageUrl)},ee,8,Y)),e("img",{src:t.imageUrl,class:"card-img-top w-100 object-fit-cover",alt:"...",style:{height:"250px"},onClick:f(u=>{o.getCommidity(t.id),o.changeType(t.category)},["prevent"])},null,8,ae),e("div",ce,m(t.category),1)]),e("div",le,[e("div",ne,[e("h5",re,m(t.title),1),e("p",ie,[t.Isdiscount?(n(),r("span",de,"原價:$"+m(t.origin_price)+"元/",1)):R("",!0),_e,e("span",ge,"售價:$"+m(t.price)+"元",1)])]),e("a",{href:"#",class:"d-inline-block btn btn-secondary",onClick:f(u=>o.plusone(t),["prevent"])},[ue,G("  放入購物車")],8,he)])])]))),128)),P(a,{ref:"Modalref"},null,512)],64)}const fe=M(Q,[["render",me]]),pe={setup(){const i=J(),{totalPage:l,page:g}=S(i);return{totalPage:l,page:g}}},ve={class:"col-12 d-flex justify-content-center align-items-center mt-3"},ye={"aria-label":"Page navigation example"},be={class:"pagination"},we={class:"page-item"},ke=e("span",{"aria-hidden":"true"},"«",-1),$e=[ke],xe=["onClick"],Se={class:"page-item"},Ce=e("span",{"aria-hidden":"true"},"»",-1),Ie=[Ce];function Pe(i,l,g,o,p,v){return n(),r("div",ve,[e("nav",ye,[e("ul",be,[e("li",we,[e("a",{class:x(["page-link",{disabled:o.page===1}]),href:"#","aria-label":"Previous",onClick:l[0]||(l[0]=f(a=>o.page-=1,["prevent"]))},$e,2)]),(n(!0),r(I,null,O(o.totalPage,(a,t)=>(n(),r("li",{class:"page-item",key:"Page"+t},[e("a",{class:x(["page-link",{active:a===o.page}]),href:"#",onClick:f(h=>o.page=a,["prevent"])},m(a),11,xe)]))),128)),e("li",Se,[e("a",{class:x(["page-link",{disabled:o.page===o.totalPage}]),href:"#","aria-label":"Next",onClick:l[1]||(l[1]=f(a=>o.page+=1,["prevent"]))},Ie,2)])])])])}const Me=M(pe,[["render",Pe]]),Ne={components:{ProductItem:fe,PagebarItem:Me}},Te={class:"col-12 col-lg-9"},Ve={class:"row row-cols-2 row-cols-lg-3 gy-2"};function Je(i,l,g,o,p,v){const a=C("ProductItem"),t=C("PagebarItem");return n(),r("div",Te,[e("div",Ve,[P(a)]),P(t)])}const Ee=M(Ne,[["render",Je]]);export{Ee as default};
