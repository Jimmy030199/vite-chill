import{N as j}from"./NavbarItem-4aaeba91.js";import{u as A}from"./usestatusStore-fbeeb8f7.js";import{_ as g,r as b,s as y,m as T,y as F,p as w,a as i,c as d,d as e,k as r,u as L,g as _,e as h,h as f,F as S,z as R,o as V,f as H}from"./index-f18f38fe.js";import{a as P}from"./useproductsStore-22ff793d.js";import{M as U}from"./ModalAlert-077c76ff.js";import{F as z}from"./FooterItem-4df0e501.js";import"./modal-4b85e49e.js";const O={setup(){const s=b([!0,!1,!1]),o=A(),{cartnextstep:l}=y(o);T(l,()=>{if(l.value){const a=s.value.findIndex(p=>p===!0);s.value[a+1]=!0,l.value=!1}});const t=F();return w(()=>{console.log("router.path",t.path),t.path==="/cart/step1"?(console.log("step1"),s.value=[!0,!1,!1]):t.path==="/cart/step2"?(console.log("step2"),s.value=[!0,!0,!1]):(console.log("step3"),s.value=[!0,!0,!0])}),{stepArr:s}}},Y={class:"container"},q={class:"row d-flex justify-content-center"},D=e("p",{class:"my-0 my-2"},"STEP1",-1),G=e("p",{class:"fw-bold my-0 my-2"},"確認購物清單",-1),J=[D,G],K={class:"col-1 p-0 d-flex flex-column justify-content-center"},Q=e("p",{class:"my-0 my-2"},"STEP2",-1),W=e("p",{class:"fw-bold my-0 my-2"},"填寫訂購資料",-1),X=[Q,W],Z={class:"col-1 p-0 d-flex flex-column justify-content-center"},tt=e("p",{class:"my-0 my-2"},"STEP3",-1),et=e("p",{class:"text-cenetr fw-bold my-0 my-2"},"付款/完成訂單",-1),ot=[tt,et];function st(s,o,l,t,a,p){return i(),d("div",Y,[e("div",q,[e("div",{class:r(["col-3 border rounded-2 py-2",{["bg-primary"]:t.stepArr[0]}])},[e("div",{class:r(["count-step text-center text-black",{["text-white"]:t.stepArr[0]}])},J,2)],2),e("div",K,[e("div",{class:r(["w-100 linebox border",{["bg-primary"]:t.stepArr[1]}])},null,2)]),e("div",{class:r(["col-3 border rounded-2 py-2",{["bg-primary"]:t.stepArr[1]}])},[e("div",{class:r(["count-step text-center text-black",{["text-white"]:t.stepArr[1]}])},X,2)],2),e("div",Z,[e("div",{class:r(["w-100 linebox border",{["bg-primary"]:t.stepArr[2]}])},null,2)]),e("div",{class:r(["col-3 border rounded-2 py-2",{["bg-primary"]:t.stepArr[2]}])},[e("div",{class:r(["count-step text-center text-black",{["text-white"]:t.stepArr[2]}])},ot,2)],2)])])}const nt=g(O,[["render",st]]);const lt={setup(){const s=b(!1),o=b(!1),l=A(),{cartnextstep:t,paybotton:a,alertModalmes:p}=y(l),c=F(),n=()=>{u.push("/cart/step1")},m=()=>{console.log("route.path",c.path),c.path==="/cart/step1"&&(console.log("push to step2"),u.push("/cart/step2"),s.value=!0),t.value=!0},v=()=>{a.value&&(console.log("route.path",c.path),c.path==="/cart/step2"&&(console.log("push to step3"),u.push("/cart/step3"),a.value=!1))},u=L(),E=()=>{u.push("/products/all")};w(()=>{c.path==="/cart/step2"?(s.value=!0,a.value=!1):s.value=!1}),w(()=>{c.path==="/cart/step3"&&(o.value=!0)});const N=P(),{orderListId:x,orderUser:$,ordermessage:B,paidstate:I}=y(N),k=b(null);return{clicktoNext:m,goshopping:E,showstep2:s,showstep3:o,paybotton:a,clicktoFinal:v,clicktostep1:n,paybill:()=>{const M=`https://vue3-course-api.hexschool.io/api/chillstore_api/pay/${x.value}`;R.post(M).then(C=>{console.log("paybill",C),C.data.success&&(p.value={style:"bg-success text-white",title:"已付款成功",content:"感謝您的訂購，祝您購物愉快",btn:{name:"前往商城",path:"/products/all"},close:!1},k.value.Modalshow(),x.value="",$.value={},B.value="",I.value=!1)})},Modalref:k}},components:{ModalAlert:U}},at={class:"container"},ct={class:"row"},rt={key:0,class:"col-12 d-flex justify-content-between"},it=e("i",{class:"bi bi-arrow-left-circle-fill"},null,-1),dt=e("i",{class:"bi bi-arrow-left-circle-fill"},null,-1),pt=e("i",{class:"bi bi-arrow-right-circle-fill"},null,-1),ut=e("i",{class:"bi bi-arrow-right-circle-fill"},null,-1),_t={key:1,class:"col-12 d-flex justify-content-center"},ft=e("i",{class:"bi bi-credit-card-2-back-fill"},null,-1);function bt(s,o,l,t,a,p){const c=_("ModalAlert");return i(),d(S,null,[e("div",at,[e("div",ct,[t.showstep3?(i(),d("div",_t,[e("button",{class:"btn btn-lg btn-warning text-white",onClick:o[4]||(o[4]=(...n)=>t.paybill&&t.paybill(...n))},[h("付款去  "),ft])])):(i(),d("div",rt,[t.showstep2?(i(),d("button",{key:1,class:"btn btn-lg btn-outline-secondary",onClick:o[1]||(o[1]=(...n)=>t.clicktostep1&&t.clicktostep1(...n))},[dt,h(" 清單明細")])):(i(),d("button",{key:0,class:"btn btn-lg btn-outline-secondary",onClick:o[0]||(o[0]=(...n)=>t.goshopping&&t.goshopping(...n))},[it,h(" 繼續購物")])),t.showstep2?(i(),d("button",{key:3,class:r(["btn btn-lg bg-dark text-white",{paybtnnot:!t.paybotton}]),onClick:o[3]||(o[3]=(...n)=>t.clicktoFinal&&t.clicktoFinal(...n))},[h("付款/完成訂單 "),ut],2)):(i(),d("button",{key:2,class:"btn btn-lg bg-dark text-white",onClick:o[2]||(o[2]=(...n)=>t.clicktoNext&&t.clicktoNext(...n))},[h("訂購確認 "),pt]))]))])]),f(c,{ref:"Modalref"},null,512)],64)}const ht=g(lt,[["render",bt]]),mt={setup(){const s=b(null),o=b(!1);let l=0;const t=()=>{window.pageYOffset>l?o.value=!0:o.value=!1};return V(()=>{l=s.value.getBoundingClientRect().height,window.addEventListener("scroll",t)}),H(()=>{window.removeEventListener("scroll",t)}),{navbarEle:s,navbarshow:o}},components:{NavbarItem:j,CartStep:nt,CartbottomBtn:ht,FooterItem:z},created(){window.addEventListener("scroll",this.navbarFixedfun)}},vt={ref:"navbarEle"},yt=e("section",null,[e("div",{class:"container-fluid"},[e("div",{class:"row"},[e("div",{class:"top-banner-cart d-flex justify-content-center align-items-center"},[e("div",{class:"fs-4 fw-bold text-white top-title p-3"},"結帳流程")])])])],-1),wt={class:"mt-5"},gt={class:"mt-5"},xt={class:"mb-4"};function kt(s,o,l,t,a,p){const c=_("NavbarItem"),n=_("CartStep"),m=_("router-view"),v=_("CartbottomBtn"),u=_("FooterItem");return i(),d(S,null,[e("div",vt,[f(c,{navbarshow:t.navbarshow},null,8,["navbarshow"])],512),yt,e("section",wt,[f(n)]),e("section",gt,[f(m)]),e("section",xt,[f(v)]),f(u)],64)}const It=g(mt,[["render",kt]]);export{It as default};
