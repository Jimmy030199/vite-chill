import{N as j}from"./NavbarItem-a617266d.js";import{F as z}from"./FooterItem-5ea53ca4.js";import V from"./ProductsTopItemAll-f9138d71.js";import{_ as S,s as h,g as _,a as y,c as w,d as o,h as v,x as W,t as f,e as P,y as R,r as g,m as T,o as B,j as N,v as A,F as E,z as G,u as H,p as q,f as U,b as O}from"./index-b53869ae.js";import{a as L,u as D}from"./useproductsStore-875e24d4.js";import{u as Y}from"./usestatusStore-0e436d0e.js";import{M as J}from"./ModalItem-a65fddb7.js";import"./ModalAlert-c29ac92f.js";import"./modal-4b85e49e.js";const K={setup(){const n=L(),e=D(),{commidity:l}=h(n),{type:t}=h(e);return{commidity:l,changeType:i=>{t.value=i}}}},Q={class:"col-12"},X={"aria-label":"breadcrumb"},Z={class:"breadcrumb"},tt={class:"breadcrumb-item fw-bold fs-5"},ot={class:"breadcrumb-item fw-bold fs-5"},et={href:"#",class:"text-decoration-none text-secondary"};function st(n,e,l,t,c,i){const a=_("router-link");return y(),w("div",Q,[o("nav",X,[o("ol",Z,[o("li",tt,[v(a,{to:"/products/all",class:"text-decoration-none text-secondary breadlink",onClick:e[0]||(e[0]=r=>t.changeType(t.commidity.category))},{default:W(()=>[P(f(t.commidity.category),1)]),_:1})]),o("li",ot,[o("a",et,f(t.commidity.title),1)])])])])}const nt=S(K,[["render",st],["__scopeId","data-v-97436471"]]),ct={setup(){const n=L(),e=D(),l=Y(),{commidity:t,product_id:c,confirmaddCart:i}=h(n),{type:a}=h(e),{isLoading:r,modalmes:s}=h(l),p=R();console.log("commodity route",p);const d=g(1),m=g(null),I=()=>{d.value!==1&&(d.value-=1)},$=()=>{d.value+=1},{addCart:x}=n,k=()=>{s.value={style:"bg-success text-white",title:`${t.value.title}`,qty:d.value},m.value.Modalshow()};T(i,()=>{i.value&&(console.log("commodityitem watch confirmaddCart"),x(c.value,d.value)),i.value=!1,m.value.Modalhide()});const u=()=>{console.log("route.params",p.params),c.value=p.params.id,console.log("product_id.value",c.value);const C=`https://vue3-course-api.hexschool.io/api/chillstore_api/product/${c.value}`;console.log(C),G.get(C).then(b=>{console.log("res",b),b.data.success&&(t.value=b.data.product,a.value=b.data.product.category,console.log("commidity.value",t.value))})};return T(p,()=>{console.log("watch to route  getCommidityData()"),u()},{deep:!0}),B(()=>{setTimeout(()=>{r.value=!1},1e3)}),{getCommidityData:u,commidity:t,count:d,countminus:I,counplus:$,isLoading:r,plustocart:k,ModalEle:m}},created(){this.getCommidityData(),this.isLoading=!0},components:{ModalItem:J}},at={class:"col-12 col-lg-6"},lt={class:"wrap-product-img w-100"},it=["src"],rt={class:"col-12 col-lg-6 mt-4 mt-lg-0"},dt={class:"fs-2 text-center fw-bold text-black"},mt={class:"fs-5 text-center fw-bold mb-4"},ut={class:"border py-2 px-3 itempagesort"},_t={class:"fs-5 text-center fw-bold"},vt={class:"d-flex justify-content-around align-items-center"},pt={class:"btn-group border"},ft={class:"btn border-end fw-bold btn-lg"},ht=o("i",{class:"bi bi-basket2-fill"},null,-1),gt={class:"mt-4"},bt=o("p",{class:"fs-4 fw-bolder pb-1 border-bottom ps-2"},"產品介紹",-1),yt={class:"fs-6 fw-bold"},wt=o("p",{class:"fs-4 fw-bolder pb-1 border-bottom ps-2"},"產品成分",-1),It={class:"fs-6 fw-bold"};function $t(n,e,l,t,c,i){const a=_("LoadingItem"),r=_("ModalItem");return y(),w(E,null,[o("div",at,[o("div",lt,[v(a,{active:t.isLoading},null,8,["active"]),N(o("img",{class:"w-100 h-100 object-fit-cover",src:t.commidity.imageUrl,alt:""},null,8,it),[[A,!t.isLoading]])])]),N(o("div",rt,[o("p",dt,f(t.commidity.title),1),o("p",mt,[o("span",ut,f(t.commidity.category),1)]),o("p",_t,"售價： $"+f(t.commidity.price)+"元",1),o("div",vt,[o("div",pt,[o("button",{type:"button",class:"btn border-end fw-bold btn-lg",onClick:e[0]||(e[0]=(...s)=>t.countminus&&t.countminus(...s))},"-"),o("span",ft,f(t.count),1),o("button",{type:"button",class:"btn border-start fw-bold btn-lg",onClick:e[1]||(e[1]=(...s)=>t.counplus&&t.counplus(...s))},"+")]),o("div",null,[o("button",{type:"button",class:"btn btn-outline-secondary fw-bold btn-lg",onClick:e[2]||(e[2]=(...s)=>t.plustocart&&t.plustocart(...s))},[ht,P("  放入購物車 ")])])]),o("div",gt,[bt,o("p",yt,f(t.commidity.description),1),wt,o("p",It,f(t.commidity.content),1)])],512),[[A,!t.isLoading]]),v(r,{ref:"ModalEle"},null,512)],64)}const xt=S(ct,[["render",$t]]),kt={setup(){const n=H(),e=D(),l=L(),{rowData:t}=h(e),{getAlldata:c}=e,{commidity:i,img_train:a}=h(l),{getImgTrain:r}=L(),s=g(null),p=g([]),d=F=>{console.log(F),n.push(`/commodity/${F}`).then(()=>{location.reload()})};q(()=>{console.log("watch all-img",s.value),console.log("watch commidity.value",i.value),console.log("watch rowData",t.value)});let m=0,I=0,$=0;const x=()=>{m=s.value.offsetWidth,console.log("onMounted後的all_img寬度",s.value.offsetWidth),$=-(m/4),I=m/4},k=g(null);B(()=>{x(),k.value=setInterval(C,1850)}),U(()=>{console.log("onBeforeUnmount"),clearInterval(k.value)});let u=0;function C(){console.log("moveLeft中width",m),-u>=I*(a.value.length-(1+3))?(u=0,s.value.style.transition="none",s.value.style.left=u+"px",console.log("stop")):(u+=$,s.value.style.left=u+"px",s.value.style.transition="all 0.3s")}const b=()=>{u=0,s.value.style.left=0,x()},M=R();return T(M,()=>{console.log("watch route ",M.params.id),c(M.params.id)},{deep:!0}),{all_img:s,img_train:a,single_img:p,rowData:t,getAlldata:c,getImgTrain:r,onclickto:d,resizeWidrh:b}},created(){this.getAlldata(this.$route.params.id),window.addEventListener("resize",this.resizeWidrh)}},Ct={class:"col-12"},Lt=o("p",{class:"fs-4 fw-bolder pb-1 border-bottom"},"您可能會喜歡",-1),St={class:"round-wrap w-100"},Mt={class:"all-img w-100 d-flex",ref:"all_img"},Tt=["onClick"],Bt=["src"];function Et(n,e,l,t,c,i){return y(),w("div",Ct,[Lt,o("div",St,[o("div",Mt,[(y(!0),w(E,null,O(t.img_train,(a,r)=>(y(),w("div",{class:"single-img h-100",ref_for:!0,ref:"single_img",key:"img_train"+r,onClick:s=>t.onclickto(a.id)},[o("img",{class:"w-100 h-100 object-fit-cover",src:a.imageUrl,alt:""},null,8,Bt)],8,Tt))),128))],512)])])}const Dt=S(kt,[["render",Et]]),Ft={setup(){const n=g(null),e=g(!1);let l=0;const t=()=>{window.pageYOffset>l?e.value=!0:e.value=!1};return B(()=>{window.addEventListener("scroll",t),n.value.getBoundingClientRect().height}),U(()=>{window.removeEventListener("scroll",t)}),{navbarEle:n,navbarshow:e}},components:{NavbarItem:j,FooterItem:z,BreadcrumbItem:nt,CommodityItem:xt,GuessLikeItem:Dt,ProductsTopItemAll:V}},Nt={ref:"navbarEle"},At={class:"m-3"},Pt={class:"container"},Rt={class:"row"},Ut={class:"row"},jt={class:"my-3"},zt={class:"container"},Vt={class:"row"};function Wt(n,e,l,t,c,i){const a=_("NavbarItem"),r=_("ProductsTopItemAll"),s=_("BreadcrumbItem"),p=_("CommodityItem"),d=_("GuessLikeItem"),m=_("FooterItem");return y(),w(E,null,[o("div",Nt,[v(a,{navbarshow:t.navbarshow},null,8,["navbarshow"])],512),v(r),o("section",At,[o("div",Pt,[o("div",Rt,[v(s)]),o("div",Ut,[v(p)])])]),o("section",jt,[o("div",zt,[o("div",Vt,[v(d)])])]),v(m)],64)}const Zt=S(Ft,[["render",Wt]]);export{Zt as default};
