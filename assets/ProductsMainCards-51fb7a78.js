import{u as J,a as F}from"./useproductsStore-bc0c29e8.js";import{u as U}from"./usestatusStore-459a5872.js";import{_ as M,s as x,r as k,p as q,m as z,g as C,a as n,c as r,F as I,b as O,d as t,w as f,t as p,q as R,e as G,h as P,k as S}from"./index-5265e79b.js";import{M as K}from"./ModalItem-ac794191.js";import"./modal-4b85e49e.js";const Q={setup(){const i=J(),l=F(),g=U(),{sortType:o,type:u}=x(i),{modalmes:v,toastmes:a,showCollection:e,removecollectionId:h}=x(g),{addCart:m,getCommidity:D}=l,{getAlldata:L}=i,B=s=>{u.value=s},E=k(null),H=k(null),j=s=>{v.value=s,m(s.id,1);const c=new Date().toLocaleTimeString();console.log(c),a.value={style:"bg-success text-white",title:s.title,content:`已將${s.title}一個商品加入購物車`,time:c}},N=k([]),y=()=>{N.value=o.value.map(s=>{const c=JSON.parse(localStorage.getItem("chillcollection"));let d=!1;return c&&c.forEach(_=>{_.id===s.id&&(d=!0)}),{...s,heart:d}})};q(()=>{y()});const A=(s,c,d)=>{const _=JSON.parse(localStorage.getItem("chillcollection"));if(e.value=!1,console.log("localarr",_),_){const V={id:s,title:c,img:d},b=JSON.stringify([..._,V]);console.log("newlocalarr",b),localStorage.setItem("chillcollection",b),y()}else{const b=JSON.stringify([{id:s,title:c,img:d}]);localStorage.setItem("chillcollection",b),y()}const w=new Date().toLocaleTimeString(),$=`${c}已加入收藏`;a.value={style:"bg-info text-white",title:c,content:$,time:w}},T=s=>{e.value=!1;const d=JSON.parse(localStorage.getItem("chillcollection")).filter($=>$.id!==s),_=JSON.stringify(d);localStorage.setItem("chillcollection",_),y();const w=new Date().toLocaleTimeString();a.value={style:"bg-danger text-white",title:"取消收藏",content:"已取消收藏該商品",time:w}};return z(h,()=>{T(h.value)}),{getAlldata:L,sortType:o,sortTypeHeart:N,getCommidity:D,changeType:B,Modalref:E,plusone:j,Modalrefprops:H,addcollect:A,removecollect:T}},created(){this.getAlldata()},components:{ModalItemVue:K}},W={class:"card mt-2 h-100"},X={class:"wrap-img-sort"},Y=["onClick"],Z=t("i",{class:"bi bi-heart"},null,-1),tt=[Z],et=["onClick"],ot=t("i",{class:"bi bi-heart-fill"},null,-1),st=[ot],at=["src","onClick"],ct={class:"product-sort fs-3 fw-bold text-center text-white"},lt={class:"card-body text-center"},nt={class:"card-title fs-4 fw-bold"},rt={class:"card-text"},it={key:0,class:"fs-6 fw-bold text-decoration-line-through text-danger me-2"},dt={class:"fs-6 fw-bold"},_t=["onClick"],gt=t("i",{class:"bi bi-basket2-fill"},null,-1);function ht(i,l,g,o,u,v){const a=C("ModalItemVue");return n(),r(I,null,[(n(!0),r(I,null,O(o.sortTypeHeart,(e,h)=>(n(),r("div",{class:"col",key:"product"+h},[t("div",W,[t("div",X,[e.heart?(n(),r("div",{key:1,class:"love-store fs-4 text-danger",onClick:m=>o.removecollect(e.id)},st,8,et)):(n(),r("div",{key:0,class:"love-store fs-4",onClick:m=>o.addcollect(e.id,e.title,e.imageUrl)},tt,8,Y)),t("img",{src:e.imageUrl,class:"card-img-top w-100 object-fit-cover",alt:"...",style:{height:"250px"},onClick:f(m=>{o.getCommidity(e.id),o.changeType(e.category)},["prevent"])},null,8,at),t("div",ct,p(e.category),1)]),t("div",lt,[t("h5",nt,p(e.title),1),t("p",rt,[e.Isdiscount?(n(),r("span",it,"原價:$"+p(e.origin_price)+"元/",1)):R("",!0),t("span",dt,"售價:$"+p(e.price)+"元",1)]),t("a",{href:"#",class:"btn btn-secondary",onClick:f(m=>o.plusone(e),["prevent"])},[gt,G("  放入購物車")],8,_t)])])]))),128)),P(a,{ref:"Modalref"},null,512)],64)}const mt=M(Q,[["render",ht]]),pt={setup(){const i=J(),{totalPage:l,page:g}=x(i);return{totalPage:l,page:g}}},ft={class:"col-12 d-flex justify-content-center align-items-center mt-3"},ut={"aria-label":"Page navigation example"},vt={class:"pagination"},yt={class:"page-item"},bt=t("span",{"aria-hidden":"true"},"«",-1),wt=[bt],$t=["onClick"],kt={class:"page-item"},St=t("span",{"aria-hidden":"true"},"»",-1),xt=[St];function Ct(i,l,g,o,u,v){return n(),r("div",ft,[t("nav",ut,[t("ul",vt,[t("li",yt,[t("a",{class:S(["page-link",{disabled:o.page===1}]),href:"#","aria-label":"Previous",onClick:l[0]||(l[0]=f(a=>o.page-=1,["prevent"]))},wt,2)]),(n(!0),r(I,null,O(o.totalPage,(a,e)=>(n(),r("li",{class:"page-item",key:"Page"+e},[t("a",{class:S(["page-link",{active:a===o.page}]),href:"#",onClick:f(h=>o.page=a,["prevent"])},p(a),11,$t)]))),128)),t("li",kt,[t("a",{class:S(["page-link",{disabled:o.page===o.totalPage}]),href:"#","aria-label":"Next",onClick:l[1]||(l[1]=f(a=>o.page+=1,["prevent"]))},xt,2)])])])])}const It=M(pt,[["render",Ct]]),Pt={components:{ProductItem:mt,PagebarItem:It}},Mt={class:"col-12 col-lg-9"},Nt={class:"row row-cols-2 row-cols-lg-3 gy-2"};function Tt(i,l,g,o,u,v){const a=C("ProductItem"),e=C("PagebarItem");return n(),r("div",Mt,[t("div",Nt,[P(a)]),P(e)])}const Bt=M(Pt,[["render",Tt]]);export{Bt as default};
